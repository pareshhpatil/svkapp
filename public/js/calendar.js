function getRealYear(e){return e.getYear()%100+(e.getYear()%100<39?2e3:1900)}function getDaysPerMonth(e,t){if(t%4==0){if(t%100==0&&t%400!=0)return monthMaxDays[e];return monthMaxDaysLeap[e]}else return monthMaxDays[e]}function createCalender(e,t,n){var r=new Date;var i=r.getDate();var s=r.getMonth();var o=getRealYear(r);if(!e){var e=o;var t=s}var u=0;for(var a=0;a<document.getElementById("selectYear").options.length;a++){if(document.getElementById("selectYear").options[a].value==e){document.getElementById("selectYear").selectedIndex=a;u=true;break}}if(!u){document.getElementById("selectYear").selectedIndex=0;e=document.getElementById("selectYear").options[0].value}document.getElementById("selectMonth").selectedIndex=t;var f=new Date(e,t,1);var l=f.getDay();continu=true;firstRow=true;var c=0;var h=0;var p=[];var d=0;while(h<=getDaysPerMonth(t,e)){if(firstRow){p[d]=document.createElement("TR");if(l>0){while(c<l){p[d].appendChild(document.createElement("TD"));c++}}firstRow=false;var h=1}if(c%7==0){d++;p[d]=document.createElement("TR")}if(n&&h==n){var v="calenderChoosenDay";var m="choosenDay";var g="this day is currently selected"}else if(h==i&&t==s&&e==o){var v="calenderToDay";var m="toDay";var g="this day today"}else{var v=false;var m="normalDay";var g=false}var y=document.createElement("TD");y.className=m;if(v){y.id=v}if(g){y.title=g}y.onmouseover=new Function("highLiteDay(this)");y.onmouseout=new Function("deHighLiteDay(this)");if(targetEl)y.onclick=new Function("pickDate("+e+", "+t+", "+h+")");else y.style.cursor="default";y.appendChild(document.createTextNode(h));p[d].appendChild(y);c++;h++}return p}function showCalender(e,t){targetEl=false;if(document.getElementById(t)){targetEl=document.getElementById(t)}else{if(document.forms[0].elements[t]){targetEl=document.forms[0].elements[t]}}var n=document.getElementById("calenderTable");var r=[0,0];var r=getParentOffset(e,r);n.style.left=r[0]+"px";n.style.top=r[1]+"px";n.style.display="block";var i=new RegExp("^([0-9]{2})-([0-9]{2})-([0-9]{4})$");var s=i.exec(targetEl.value);if(s==null){trs=createCalender(false,false,false);showCalenderBody(trs)}else{if(s[1].substr(0,1)==0)s[1]=s[1].substr(1,1);if(s[2].substr(0,1)==0)s[2]=s[2].substr(1,1);s[2]=s[2]-1;trs=createCalender(s[3],s[2],s[1]);showCalenderBody(trs)}hideSelect(document.body,1)}function showCalenderBody(e){var t=document.getElementById("calender");while(t.childNodes[0]){t.removeChild(t.childNodes[0])}for(var n in e){t.appendChild(e[n])}}function setYears(e,t){var n=new Date;var r=getRealYear(n);if(e)startYear=r;if(t)endYear=r;document.getElementById("selectYear").options.length=0;var i=0;for(y=t;y>=e;y--){document.getElementById("selectYear")[i++]=new Option(y,y)}}function hideSelect(e,t){if(t>=100){return}var n=e.childNodes.length;for(var r=0;r<n;r++){var i=e.childNodes[r];if(i.tagName=="SELECT"){if(i.id!="selectMonth"&&i.id!="selectYear"){var s=document.getElementById("calenderTable");var o=[0,0];var o=getParentOffset(i,o);var u=o[0];var a=o[0]+i.offsetWidth;var f=o[1];var l=o[1]+i.offsetHeight;var c=s.offsetLeft;var h=s.offsetLeft+s.offsetWidth;var p=s.offsetTop;var d=s.offsetTop+s.offsetHeight;if((u>=c&&u<=h||a<=h&&a>=c||u<=c&&a>=h)&&(f>=p&&f<=d||l<=d&&l>=p||f<=p&&l>=d)){hideSelectTags[hideSelectTags.length]=i;i.style.display="none"}}}else if(i.childNodes.length>0){hideSelect(i,t+1)}}}function closeCalender(){for(var e=0;e<hideSelectTags.length;e++){hideSelectTags[e].style.display="block"}hideSelectTags.length=0;document.getElementById("calenderTable").style.display="none"}function highLiteDay(e){e.className="hlDay"}function deHighLiteDay(e){if(e.id=="calenderToDay")e.className="toDay";else if(e.id=="calenderChoosenDay")e.className="choosenDay";else e.className="normalDay"}function pickDate(e,t,n){t++;n=n<10?"0"+n:n;t=t<10?"0"+t:t;if(!targetEl){alert("target for date is not set yet")}else{targetEl.value=n+"-"+t+"-"+e;closeCalender()}}function getParentOffset(e,t){t[0]+=e.offsetLeft;t[1]+=e.offsetTop;if(e.offsetParent)t=getParentOffset(e.offsetParent,t);return t}monthMaxDays=[31,28,31,30,31,30,31,31,30,31,30,31];monthMaxDaysLeap=[31,29,31,30,31,30,31,31,30,31,30,31];hideSelectTags=[]