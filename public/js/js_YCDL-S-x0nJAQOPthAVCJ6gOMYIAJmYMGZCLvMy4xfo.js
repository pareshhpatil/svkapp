function buildmap(){var e=new google.maps.LatLng(39,-75.1575);var t=new google.maps.LatLng(42.67754,-71.15424);var n={zoom:7,scrollwheel:false,center:e,streetViewControl:true,panControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},mapTypeControl:false};var r=new google.maps.InfoWindow;var i=new google.maps.Map(document.getElementById("background-image"),n);var s=new google.maps.Marker({position:t,map:i,icon:Drupal.settings.basePath+"sites/commonplaces.com/themes/cp/images/logo-google-pin.png",shadow:Drupal.settings.basePath+"sites/commonplaces.com/themes/cp/images/logo-google-pin-shadow.png",title:"Commonplaces"});google.maps.event.addListener(s,"click",function(){r.setContent("CommonPlaces e-Solutions<br />2 Village Green Rd. Suite B4 <br/>Hampstead, NH 03841");r.open(i,this)});s.setAnimation(google.maps.Animation.BOUNCE)}(function(e){function t(e,t){var n=parseInt(e.css(t),10);if(n){return n}var r=e[0].currentStyle;return r&&r.width&&parseInt(r.width,10)}function n(t,n){var r=e(n);return r.length<2?r:t.parent().find(n)}function i(t,i){var s=this,o=t.add(s),u=t.children(),a=0,f=i.vertical;if(!r){r=s}if(u.length>1){u=e(i.items,t)}e.extend(s,{getConf:function(){return i},getIndex:function(){return a},getSize:function(){return s.getItems().size()},getNaviButtons:function(){return h.add(p)},getRoot:function(){return t},getItemWrap:function(){return u},getItems:function(){return u.children(i.item).not("."+i.clonedClass)},move:function(e,t){return s.seekTo(a+e,t)},next:function(e){return s.move(1,e)},prev:function(e){return s.move(-1,e)},begin:function(e){return s.seekTo(0,e)},end:function(e){return s.seekTo(s.getSize()-1,e)},focus:function(){r=s;return s},addItem:function(t){t=e(t);if(!i.circular){u.append(t)}else{u.children("."+i.clonedClass+":last").before(t);u.children("."+i.clonedClass+":first").replaceWith(t.clone().addClass(i.clonedClass))}o.trigger("onAddItem",[t]);return s},seekTo:function(t,n,l){if(!t.jquery){t*=1}if(i.circular&&t===0&&a==-1&&n!==0){return s}if(!i.circular&&t<0||t>s.getSize()||t<-1){return s}var c=t;if(t.jquery){t=s.getItems().index(t)}else{c=s.getItems().eq(t)}var h=e.Event("onBeforeSeek");if(!l){o.trigger(h,[t,n]);if(h.isDefaultPrevented()||!c.length){return s}}var p=f?{top:-c.position().top}:{left:-c.position().left};a=t;r=s;if(n===undefined){n=i.speed}u.animate(p,n,i.easing,l||function(){o.trigger("onSeek",[t])});return s}});e.each(["onBeforeSeek","onSeek","onAddItem"],function(t,n){if(e.isFunction(i[n])){e(s).bind(n,i[n])}s[n]=function(t){if(t){e(s).bind(n,t)}return s}});if(i.circular){var l=s.getItems().slice(-1).clone().prependTo(u),c=s.getItems().eq(1).clone().appendTo(u);l.add(c).addClass(i.clonedClass);s.onBeforeSeek(function(e,t,n){if(e.isDefaultPrevented()){return}if(t==-1){s.seekTo(l,n,function(){s.end(0)});return e.preventDefault()}else if(t==s.getSize()){s.seekTo(c,n,function(){s.begin(0)})}});s.seekTo(0,0,function(){})}var h=n(t,i.prev).click(function(){s.prev()}),p=n(t,i.next).click(function(){s.next()});if(!i.circular&&s.getSize()>1){s.onBeforeSeek(function(e,t){setTimeout(function(){if(!e.isDefaultPrevented()){h.toggleClass(i.disabledClass,t<=0);p.toggleClass(i.disabledClass,t>=s.getSize()-1)}},1)});if(!i.initialIndex){h.addClass(i.disabledClass)}}if(i.mousewheel&&e.fn.mousewheel){t.mousewheel(function(e,t){if(i.mousewheel){s.move(t<0?1:-1,i.wheelSpeed||50);return false}})}if(i.touch){var d={};u[0].ontouchstart=function(e){var t=e.touches[0];d.x=t.clientX;d.y=t.clientY};u[0].ontouchmove=function(e){if(e.touches.length==1&&!u.is(":animated")){var t=e.touches[0],n=d.x-t.clientX,r=d.y-t.clientY;s[f&&r>0||!f&&n>0?"next":"prev"]();e.preventDefault()}}}if(i.keyboard){e(document).bind("keydown.scrollable",function(t){if(!i.keyboard||t.altKey||t.ctrlKey||e(t.target).is(":input")){return}if(i.keyboard!="static"&&r!=s){return}var n=t.keyCode;if(f&&(n==38||n==40)){s.move(n==38?-1:1);return t.preventDefault()}if(!f&&(n==37||n==39)){s.move(n==37?-1:1);return t.preventDefault()}})}if(i.initialIndex){s.seekTo(i.initialIndex,0,function(){})}}e.tools=e.tools||{version:"@VERSION"};e.tools.scrollable={conf:{activeClass:"active",circular:true,clonedClass:"cloned",disabledClass:"disabled",easing:"swing",initialIndex:0,item:null,items:".items",keyboard:true,mousewheel:false,next:".next",prev:".prev",speed:400,vertical:false,touch:true,pauseonover:true,wheelSpeed:0}};var r;e.fn.scrollable=function(t){var n=this.data("scrollable");if(n){return n}t=e.extend({},e.tools.scrollable.conf,t);this.each(function(){n=new i(e(this),t);e(this).data("scrollable",n)});return t.api?n:this}})(jQuery);(function(e){function n(t,n){var r=e(n);return r.length<2?r:t.parent().find(n)}var t=e.tools.scrollable;t.navigator={conf:{navi:".navi",naviItem:null,activeClass:"active",indexed:false,idPrefix:null,history:false}};e.fn.navigator=function(r){if(typeof r=="string"){r={navi:r}}r=e.extend({},t.navigator.conf,r);var i;this.each(function(){function f(e,n,r){t.seekTo(n);if(a){if(location.hash){location.hash=e.attr("href").replace("#","")}}else{return r.preventDefault()}}function l(){return s.find(r.naviItem||"> *")}function c(t){var n=e("<"+(r.naviItem||"a")+"/>").click(function(n){f(e(this),t,n)}).attr("href","#"+t);if(t===0){n.addClass(u)}if(r.indexed){n.text(t+1)}if(r.idPrefix){n.attr("id",r.idPrefix+t)}return n.appendTo(s)}function h(e,t){var n=l().eq(t.replace("#",""));if(!n.length){n=l().filter("[href="+t+"]")}n.click()}var t=e(this).data("scrollable"),s=r.navi.jquery?r.navi:n(t.getRoot(),r.navi),o=t.getNaviButtons(),u=r.activeClass,a=r.history&&e.fn.history;if(t){i=t}t.getNaviButtons=function(){return o.add(s)};if(l().length){l().each(function(t){e(this).click(function(n){f(e(this),t,n)})})}else{e.each(t.getItems(),function(e){c(e)})}t.onBeforeSeek(function(e,t){setTimeout(function(){if(!e.isDefaultPrevented()){var n=l().eq(t);if(!e.isDefaultPrevented()&&n.length){l().removeClass(u).eq(t).addClass(u)}}},1)});t.onAddItem(function(e,n){n=c(t.getItems().index(n));if(a){n.history(h)}});if(a){l().history(h)}});return r.api?i:this}})(jQuery);(function(e){function s(e){if(e){var t=n.contentWindow.document;t.open().close();t.location.hash=e}}var t,n,r,i;e.tools=e.tools||{version:"@VERSION"};e.tools.history={init:function(o){if(i){return}if(e.browser.msie&&e.browser.version<"8"){if(!n){n=e("<iframe/>").attr("src","javascript:false;").hide().get(0);e("body").append(n);setInterval(function(){var r=n.contentWindow.document,i=r.location.hash;if(t!==i){e(window).trigger("hash",i)}},100);s(location.hash||"#")}}else{setInterval(function(){var n=location.hash;if(n!==t){e(window).trigger("hash",n)}},100)}r=!r?o:r.add(o);o.click(function(t){var r=e(this).attr("href");if(n){s(r)}if(r.slice(0,1)!="#"){location.href="#"+r;return t.preventDefault()}});i=true}};e(window).bind("hash",function(n,i){if(i){r.filter(function(){var t=e(this).attr("href");return t==i||t==i.replace("#","")}).trigger("history",[i])}else{r.eq(0).trigger("history",[i])}t=i});e.fn.history=function(t){e.tools.history.init(this);return this.bind("history",t)}})(jQuery);(function(e){var t=e.tools.scrollable;t.autoscroll={conf:{autoplay:true,interval:11e4,speed:100,autopause:true}};e.fn.autoscroll=function(n){if(typeof n=="number"){n={interval:n}}var r=e.extend({},t.autoscroll.conf,n),i;this.each(function(){var t=e(this).data("scrollable");if(t){i=t}var n,s,o=true;t.play=function(){if(n){return}o=false;n=setInterval(function(){t.next()},r.interval);t.next()};t.pause=function(){n=clearInterval(n)};t.stop=function(){t.pause();o=true};if(r.autopause){t.getRoot().add(t.getNaviButtons()).hover(function(){t.pause();clearInterval(s)},function(){if(!o){s=setTimeout(t.play,r.interval)}})}if(r.autoplay){setTimeout(t.play,r.interval)}});return r.api?i:this}})(jQuery);(function(e){Drupal.behaviors.cpThemeBehavior={attach:function(t){if(t instanceof jQuery||e(".body",t).length>0){return}if(e("#block-views-banner-block").length>0){e("#block-views-banner-block .view-content .items .banner-image").css("width",e(document).width());if(e(document).width()<500){e("#block-views-banner-block .browse").fadeOut();e(".block.contact-us").fadeOut()}e("#block-views-banner-block .view-content").scrollable({circular:true,speed:500,mousewheel:true,touch:true}).autoscroll({interval:11e3,autopause:true,autoplay:true}).navigator();api=e("#block-views-banner-block .view-content").data("scrollable");e(window).resize(function(){if(e("#block-views-banner-block .view-content .items:animated").length==0){e("#block-views-banner-block .view-content .items .banner-image").css("width",e(document).width());nleft=e(document).width()*(api.getIndex()+1);e("#block-views-banner-block .view-content .items").css("left","-"+nleft+"px")}if(e(document).width()<500){e("#block-views-banner-block .browse").fadeOut();e(".block.contact-us").fadeOut()}else{e("#block-views-banner-block .browse").fadeIn();e(".block.contact-us").fadeIn()}})}if(e("#block-views-logo-block-1").length>0){e("#block-views-logo-block-1 .view-content .item-list li .bw img").each(function(t){e(this).parent().parent(".logo-images").css("width",e(this).width()).css("height",e(this).height());if(e(this).height()<45){e(this).parent().parent(".logo-images").css("margin-top","30px")}})}if(e(".view-portfolio-menu").length>0){e(".creative-results .view-portfolio-menu .view-content .item-list li span.logo-images").each(function(t){e(this).css("width",e("img",this).css("width"));e(this).css("height",e("img",this).css("height"))});var n=[];e(".view-portfolio-menu .view-content ul li .element-invisible").each(function(t){var r=document.createElement("img");r.src=e(this).text().replace("/images/","/styles/900x385/public/images/");n.push(r)});e(".view-portfolio .thumbnails ul li img").live("click",function(){if(!e(this).hasClass("active")){var t=e(this).parents("ul");e(t).find("li img.active").removeClass("active");e(this).addClass("active")}})}if(e(".form-item#webform-component-attachment").length>0&&jQuery.support.leadingWhitespace){e(".form-item#webform-component-attachment").addClass("special-attach");var r=e(".form-item#webform-component-attachment #edit-submitted-attachment-upload").val();if(r!=""){r.replace(/fake/i,"my");e(".form-item#webform-component-attachment #edit-submitted-attachment-upload").before('<div class="fake-content">'+r+"</div>");e(".form-item#webform-component-attachment").addClass("with-content")}e(".form-item#webform-component-attachment #edit-submitted-attachment-upload").change(function(t){e(".form-item#webform-component-attachment .fake-content").remove();r=e(this).val();e(this).before('<div class="fake-content">'+r.replace(/fake/i,"my")+"</div>");e(".form-item#webform-component-attachment").addClass("with-content")})}if(e("#messages .fade-out-message").length>0){e("#messages").fadeOut(9e3)}if(e("body.get-in-touch #node-16").length>0){e("body").append('<div id="background-image"></div>');buildmap()}e("body.get-in-touch #block-menu-block-2 ul.menu li a").click(function(){if(e(this).parent("li").hasClass("first")){e("#background-image").fadeIn(2e3)}else{e("#background-image").hide("fast")}})},detach:function(e){}}})(jQuery);(function(e){e.fn.hoverscroll=function(t){if(!t){t={}}t=e.extend({},e.fn.hoverscroll.params,t);this.each(function(){function h(e,n){e=e-s.offset().left;n=n-s.offset().top;var r;if(!t.vertical){r=e}else{r=n}for(i in c){if(r>=c[i].from&&r<c[i].to){if(c[i].action=="move"){d(c[i].direction,c[i].speed)}else{v()}}}}function p(){if(!t.arrows||t.fixedArrows){return}var n;var i;if(!t.vertical){n=r[0].scrollWidth-r.width();i=r[0].scrollLeft}else{n=r[0].scrollHeight-r.height();i=r[0].scrollTop}var o=t.arrowsOpacity;var u=i/n*o;if(u>o){u=o}if(isNaN(u)){u=0}var a=false;if(u<=0){e("div.arrow.left, div.arrow.top",s).hide();if(n>0){e("div.arrow.right, div.arrow.bottom",s).show().css("opacity",o)}a=true}if(u>=o||n<=0){e("div.arrow.right, div.arrow.bottom",s).hide();a=true}if(!a){e("div.arrow.left, div.arrow.top",s).show().css("opacity",u);e("div.arrow.right, div.arrow.bottom",s).show().css("opacity",o-u)}}function d(n,r){if(s[0].direction!=n){if(t.debug){e.log("[HoverScroll] Starting to move. direction: "+n+", speed: "+r)}v();s[0].direction=n;s[0].isChanging=true;m()}if(s[0].speed!=r){if(t.debug){e.log("[HoverScroll] Changed speed: "+r)}s[0].speed=r}}function v(){if(s[0].isChanging){if(t.debug){e.log("[HoverScroll] Stoped moving")}s[0].isChanging=false;s[0].direction=0;s[0].speed=1;clearTimeout(s[0].timer)}}function m(){if(s[0].isChanging==false){return}p();var e;if(!t.vertical){e="scrollLeft"}else{e="scrollTop"}r[0][e]+=s[0].direction*s[0].speed;s[0].timer=setTimeout(function(){m()},50)}var n=e(this);if(t.debug){e.log("[HoverScroll] Trying to create hoverscroll on element "+this.tagName+"#"+this.id)}if(t.fixedArrows){n.wrap('<div class="fixed-listcontainer"></div>')}else{n.wrap('<div class="listcontainer"></div>')}n.addClass("list");var r=n.parent();r.wrap('<div class="ui-widget-content hoverscroll'+(t.rtl&&!t.vertical?" rtl":"")+'"></div>');var s=r.parent();var o,u,a,f;if(t.arrows){if(!t.vertical){if(t.fixedArrows){o='<div class="fixed-arrow left"></div>';u='<div class="fixed-arrow right"></div>';r.before(o).after(u)}else{o='<div class="arrow left"></div>';u='<div class="arrow right"></div>';r.append(o).append(u)}}else{if(t.fixedArrows){a='<div class="fixed-arrow top"></div>';f='<div class="fixed-arrow bottom"></div>';r.before(a).after(f)}else{a='<div class="arrow top"></div>';f='<div class="arrow bottom"></div>';r.append(a).append(f)}}}s.width(t.width).height(t.height);if(t.arrows&&t.fixedArrows){if(t.vertical){a=r.prev();f=r.next();r.width(t.width).height(t.height-(a.height()+f.height()))}else{o=r.prev();u=r.next();r.height(t.height).width(t.width-(o.width()+u.width()))}}else{r.width(t.width).height(t.height)}var l=0;if(!t.vertical){s.addClass("horizontal");n.children().each(function(){e(this).addClass("item");if(e(this).outerWidth){l+=e(this).outerWidth(true)}else{l+=e(this).width()+parseInt(e(this).css("padding-left"))+parseInt(e(this).css("padding-right"))+parseInt(e(this).css("margin-left"))+parseInt(e(this).css("margin-right"))}});n.width(l);if(t.debug){e.log("[HoverScroll] Computed content width : "+l+"px")}if(s.outerWidth){l=s.outerWidth()}else{l=s.width()+parseInt(s.css("padding-left"))+parseInt(s.css("padding-right"))+parseInt(s.css("margin-left"))+parseInt(s.css("margin-right"))}if(t.debug){e.log("[HoverScroll] Computed container width : "+l+"px")}}else{s.addClass("vertical");n.children().each(function(){e(this).addClass("item");if(e(this).outerHeight){l+=e(this).outerHeight(true)}else{l+=e(this).height()+parseInt(e(this).css("padding-top"))+parseInt(e(this).css("padding-bottom"))+parseInt(e(this).css("margin-bottom"))+parseInt(e(this).css("margin-bottom"))}});n.height(l);if(t.debug){e.log("[HoverScroll] Computed content height : "+l+"px")}if(s.outerHeight){l=s.outerHeight()}else{l=s.height()+parseInt(s.css("padding-top"))+parseInt(s.css("padding-bottom"))+parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom"))}if(t.debug){e.log("[HoverScroll] Computed container height : "+l+"px")}}var c={1:{action:"move",from:0,to:.03*l,direction:-1,speed:16},2:{action:"move",from:.03*l,to:.075*l,direction:-1,speed:8},3:{action:"move",from:.075*l,to:.125*l,direction:-1,speed:4},4:{action:"move",from:.125*l,to:.2*l,direction:-1,speed:2},5:{action:"stop",from:.2*l,to:.8*l},6:{action:"move",from:.8*l,to:.875*l,direction:1,speed:2},7:{action:"move",from:.875*l,to:.925*l,direction:1,speed:4},8:{action:"move",from:.925*l,to:.97*l,direction:1,speed:8},9:{action:"move",from:.97*l,to:l,direction:1,speed:16}};s[0].isChanging=false;s[0].direction=0;s[0].speed=1;if(t.rtl&&!t.vertical){r[0].scrollLeft=r[0].scrollWidth-r.width()}s.mousemove(function(e){h(e.pageX,e.pageY)}).bind("mouseleave",function(){v()});this.startMoving=d;this.stopMoving=v;if(t.arrows&&!t.fixedArrows){p()}else{e(".arrowleft, .arrowright, .arrowtop, .arrowbottom",s).hide()}});return this};if(!e.fn.offset){e.fn.offset=function(){this.left=this.top=0;if(this[0]&&this[0].offsetParent){var e=this[0];do{this.left+=e.offsetLeft;this.top+=e.offsetTop}while(e=e.offsetParent)}return this}}e.fn.hoverscroll.params={vertical:false,width:400,height:50,arrows:true,arrowsOpacity:.7,fixedArrows:false,rtl:false,debug:false};e.log=function(){try{console.log.apply(console,arguments)}catch(e){try{opera.postError.apply(opera,arguments)}catch(e){}}}})(jQuery);